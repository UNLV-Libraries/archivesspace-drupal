uuid: baa226ff-09ec-48d8-96e4-439d55d7be55
id: as_resources
label: ArchivesSpace Resources
migration_group: archivesspace
migration_dependencies:
  required:
    - as_repositories

source:
  plugin: archivesspace
  object_type: resource
  base_uri: http://drupalvm.test:8089 #http://localhost:8089/repositories
  username: admin
  password: admin
  keys:
    - uri

destination:
  plugin: entity:node
  bundle: archival_resource

process:
  type:
    plugin: default_value
    default_value: archival_resource
  title: title
  uid:
    plugin: default_value
    default_value: 1

# field_repository doesn't currently work because the repository source field
# is an object, where we need the repository[ref].
# We need to update either the ArchivesSpaceSource or ArchivesSpaceIterator
# to return that as needed.

  # field_repository:
  #   plugin: migration_lookup
  #   migration: as_repositories
  #   source: repository
  #   no_stub: true
